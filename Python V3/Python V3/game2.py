import time, os, sys, keyboard, math, mouse

def line(point1: tuple, point2: tuple, character: str):
    global screen
    
    for i in range(point1[0], point2[0], 1):
        y = (point2[1] - point1[1]) / (point2[0] - point1[0]) * (i + 0.5 - point1[0]) + point1[1]
        screen[round(y)][i] = character
        screen[round(y)][i - 1] = character
    for i in range(point1[0], point2[0], -1):
        y = (point2[1] - point1[1]) / (point2[0] - point1[0]) * (i + 0.5 - point1[0]) + point1[1]
        screen[round(y)][i] = character
        screen[round(y)][i + 1] = character
    
    for i in range(point1[1], point2[1], 1):
        x = (point2[0] - point1[0]) / (point2[1] - point1[1]) * (i + 0.5 - point1[1]) + point1[0]
        screen[i][round(x)] = character
        screen[i - 1][round(x)] = character 
    for i in range(point1[1], point2[1], -1):
        x = (point2[0] - point1[0]) / (point2[1] - point1[1]) * (i + 0.5 - point1[1]) + point1[0]
        screen[i][round(x)] = character
        screen[i + 1][round(x)] = character

    return screen

def circle(center: tuple, radius: float, stretchx: float, stretchy: float, character: str, filled = False):
    global screen

    for i in range(round(center[0] - radius * stretchx - 1), round(center[0] + radius * stretchx + 1), 1):
        try:
            y1 = math.sqrt((radius ** 2 - 1/stretchx * (i + 0.5 - center[0]) ** 2) * stretchy) + center[1]
            y2 = -math.sqrt((radius ** 2 - 1/stretchx * (i + 0.5 - center[0]) ** 2) * stretchy) + center[1]
        except ValueError:
            continue

        if filled:
            for i2 in range(round(y2), round(y1), 1):
                screen[round(i2)][i] = character
                screen[round(i2)][i + 1] = character

        screen[round(y1)][i] = character
        screen[round(y1)][i + 1] = character
        screen[round(y2)][i] = character
        screen[round(y2)][i + 1] = character
    
    for i in range(round(center[1] - radius * stretchy - 1), round(center[1] + radius * stretchy + 1), 1):
        try:
            x1 = math.sqrt((radius ** 2 - 1/stretchy * (i + 0.5 - center[1]) ** 2) * stretchx) + center[0]
            x2 = -math.sqrt((radius ** 2 - 1/stretchy * (i + 0.5 - center[1]) ** 2) * stretchx) + center[0]
        except ValueError:
            continue
        
        if filled:
            for i2 in range(round(x2), round(x1), 1):
                screen[i][round(i2)] = character
                screen[i + 1][round(i2)] = character
        
        screen[i][round(x1)] = character
        screen[i + 1][round(x1)] = character
        screen[i][round(x2)] = character
        screen[i + 1][round(x2)] = character
    
    return screen

def checkButton(button: str):
    global buttons
    buttonCheck = buttons[button]
    buttonBool = False
    for i in buttonCheck:
        if (i["x"] <= mouse.get_position()[0] <= (i["x"] + i["width"])) and (i["y"] <= mouse.get_position()[0] <= (i["y"] + i["height"])):
            buttonBool = True
    return buttonBool

buttons = {"Button1": [{"x": 5, "y": 5, "height": 10, "width": 10}]}

buttons.update({"Button2": [{"x": 5, "y": 5, "height": 10, "width": 10}]})

x, y = 3, 3
gravity = 1
screen = [[" " for i in range(os.get_terminal_size().columns)] for i in range(os.get_terminal_size().lines - 1)]
screen.insert(0, [" " * os.get_terminal_size().columns])
while True:
    screen[round(y)][round(x)] = "#"
    if (keyboard.is_pressed("w") or keyboard.is_pressed("space")):
        y -= 1
    if keyboard.is_pressed("a"):
        x -= 1
    if keyboard.is_pressed("s"):
        y += 1
    if keyboard.is_pressed("d"):
        x += 1

    if y < (os.get_terminal_size().lines - 1):
        gravity += 0.02
    else:
        gravity = 0
    y += gravity
    x = min(max(x,0),os.get_terminal_size().columns - 1)
    y = min(max(y,1),os.get_terminal_size().lines - 1)
    # screen = [["#" for i in range(os.get_terminal_size().columns)] for i in range(os.get_terminal_size().lines - 1)]
    # screen.insert(0, [" " * os.get_terminal_size().columns])
    screen[round(y)][round(x)] = "\033[1;31;40mX\033[0;37;40m"
    a = 0
    for i in screen:
        a += 1
        sys.stdout.write("\033[" + str(a) +";0f" + "".join(i))
        sys.stdout.write(f"\033[{os.get_terminal_size().lines};{os.get_terminal_size().columns}f")
        sys.stdout.flush()
    # if keyboard.is_pressed("q"):
        # screen = line((10, 8), (300, 8), "@")
    if keyboard.is_pressed("e"):
        screen = circle((100, 20), 10, 6.5, 1, "@", True)
    #(Only run the function when cursor clicks)
    # print(checkButton("Button1"))
    time.sleep(1/30)




#"\033[0;0f"


#      ------------    
#    /              \  
#  /       /¯¯\       \
#  |       \__/       |
#   ------------------  





# |--___                                                                                                                                                ___--|
# |#####¯¯---___                                                                                                                                ___---¯¯#####|
# |#############¯¯--___                                                                                                                  ___--¯¯#############|
# |####################¯¯---________________________________________________________________________________________________________---¯¯####################|
# |###########################|╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦╗|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩══╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦══╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═__________________________________________╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═| ▄                                    ▄ |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   \-\----------------------------/-/   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   | \-\                      /-/   |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |  \-\                   /-/     |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   |     \-\              /-/       |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |       \-\          /-/         |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   |         \-\      /-/           |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |           \-\  /-/             |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   |            \/-/                |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |            /-/\-\              |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   |         /-/      \-\           |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |       /-/          \-\         |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   |     /-/              \-\       |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   |   /-/                  \-\     |   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╠═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═|   | /-/                       \-\  |   |╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦╣|###########################|
# |###########################|╠═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═|   /-/                            \-\   |╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩═╦═╩╣|###########################|
# |###########################|╚═╩═══╩═══╩═══╩═══╩═══╩═══╩═| ▀ |                                | ▀ |╩═══╩═══╩═══╩═══╩═══╩═══╩══╝|###########################|
# |######################__---¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯---__######################|
# |##############___--¯¯¯      ¯¯¯¯¯   ____            ¯¯¯¯¯¯          ________                   ¯¯¯¯¯¯¯         ____                 ¯¯¯--___##############|
# |######___--¯¯¯           ___                       __                            ¯¯¯¯¯¯                _______              ¯¯¯¯     ___    ¯¯¯--___######|
# |__--¯¯                              ¯¯¯¯¯¯                                     ______                                     ____                      ¯¯--__|



############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
############################################################################
